# q v2

In q v2, we will build a whole new framework with a modular and extensible architecture. It will also be model-agnostic, enabling prompt and framework reuse across Claude, GPT, and any other model.

In q v2 we will also enable conversations  to use any combination of commands. Each conversation is separated by active terminal sessions, and a new session can load another session with its id.  

## Commands

### Text

The class for this command will likely serve as the base for all other text-based commands. It will provide a pure prompt without any system message.

Basic text prompt:
```
$ q -t <text>
```

Basic text prompt with an input file as context:
```
$ q -t <text> -f <input_file>
```

### Code

Generate code snippets:
```
$ q -c <text>
```

Generate code snippets with an input file as context:
```
$ q -c <text> -f <input_file>
```

Generate code to an output file:
```
$ q -c <text> -o <output_file>
```

*Possibly:* Generate code snippets with the current working directory as context:
```
$q -c <text> -d
$q -cd <text>
```

### Shell

Generate shell commands:
```
$ q -s <text>
```

Generate and execute shell commands:
```
$ q -s <text> -x
$ q -sx <text>
```

Fix the last shell command from its output:
```
$ q -s
```

Fix the last shell command and execute it:
```
$ q -s -x
$ q -sx
```

### Explain

Explain the output of the last command:
```
$ q -e
```

Explain a code snippet:
```
$ q -e <text>
```

Explain a code snippet with an input file as context:
```
$ q -e <text> -f <input_file>
```

Explain the contents of a file:
```
$ q -e -f <input_file>
$ q -ef <input_file>
```

### Web Search

Search the web:
```
$ q -w <text>
```

### Image

Generate an image:
```
$ q -i <text>
```

Edit an image:
```
$ q -i <text> -f <input_file>
```

Generate an image and save it to a file:
```
$ q -i <text> -o <output_file>
```

### Other Options

Overwrite previous message:
```
$ q -sz
```

Overwrite previous message with same command:
```
$ q -z <text>
```

Overwrite last n messages:
```
$ q -z <n> <text>
```

Print model parameters and messages in history:
```
$ q -v
```

Alternatively combine it with any other command to view the parameters and messages for that command.


## CLI Flags

All characters are mapped to a single command or option, enabling them to be combined in nearly any way. We also ditch the long-form options for simplicity.

```
a - Agent          COMMAND (reserved for future use)
b -
c - Code           COMMAND (generate code)
d - Directory       OPTION (input directory or cwd as context)
e - Explain        COMMAND (explain code)
f - Input File      OPTION (input file as context)
g -
h - Help           COMMAND (help message)
i - Image          COMMAND (generate/edit an image)
j - Json            OPTION (output as JSON)
k -
l - Load Session    OPTION (load another conversation)
m - Model           OPTION (override model)
n -
o - Output File     OPTION (output file)
p - 
q -
r -
s - Shell          COMMAND (generate shell commands)
t - Text           COMMAND (generate basic text)
u - User Command   COMMAND (run from ~/.q/commands/)
v - Verbose         OPTION (print model parameters and messages)
w - Web Search     COMMAND (search the web)
x - Execute         OPTION (execute shell commands)
y -
z - Undo            OPTION (undo last message)
```